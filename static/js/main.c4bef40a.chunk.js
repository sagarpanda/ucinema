(this["webpackJsonp@ucinema/cinema-ui"]=this["webpackJsonp@ucinema/cinema-ui"]||[]).push([[0],{185:function(e,t,a){e.exports=a(339)},338:function(e,t,a){},339:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(39),l=a.n(c),i=a(59),u=a(177),o=a(34),s=a(18),m={intraBaseUrl:"https://192.168.29.233:9000",googleSheetId:"1xqxT4Q0Zh4n9W5GYew-ltxfb4oG42icVlHQEX_RErQE",checkerUrl:"/checker",movieUrl:"/movies"},d=a(48),p=a.n(d),h=a(79);function E(){return(E=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://mock-serv.herokuapp.com/api/cinema",e.next=3,fetch("https://mock-serv.herokuapp.com/api/cinema").then((function(e){return 200===e.status?e.json():{records:[]}}));case 3:return t=e.sent,e.abrupt("return",t.records);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(){return E.apply(this,arguments)};function f(){return(f=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return 200===e.status?{data:e.json(),status:!0}:{status:!1}}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(e){return f.apply(this,arguments)},g=r.a.createContext({}),j={isLoading:!0,data:[],subData:{},intranet:!1,cloudData:[],cloudSubData:{}};function O(e,t){switch(t.type){case"fetchGoogleSuccess":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,data:t.payload.data,subData:t.payload.subData});case"intraSuccess":return Object(s.a)(Object(s.a)({},e),{},{intranet:!0});case"fetchCloudSuccess":return Object(s.a)(Object(s.a)({},e),{},{cloudData:t.payload});case"update":return Object(s.a)(Object(s.a)({},e),t.payload);default:throw new Error}}var w=function(e){var t=Object(n.useReducer)(O,j),a=Object(o.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){b().then((function(e){var t={},a=e.filter((function(e){if(e.parentId){var a=t[e.parentId]||[];t[e.parentId]=[].concat(Object(u.a)(a),[e])}return!e.hidden&&!e.parentId}));return l({type:"fetchGoogleSuccess",payload:{data:a,subData:t}}),a})).then((function(e){return v("".concat(m.intraBaseUrl).concat(m.checkerUrl))})).then((function(e){return!!e.status&&(l({type:"intraSuccess"}),fetch("".concat(m.intraBaseUrl).concat(m.movieUrl)).then((function(e){if(200===e.status)return e.json()})).then((function(e){l({type:"fetchCloudSuccess",payload:e})})),!0)}))}),[]);var i=Object(s.a)(Object(s.a)({},c),{},{dispatch:l});return r.a.createElement(g.Provider,{value:i},e.children)},y=a(19),C=a(14),I=(a(193),a(352)),S=a(355),x=a(348),D=a(346),k={baseRoute:""},W=function(e){var t=Object(n.useState)({loading:!1,value:"",results:[]}),a=Object(o.a)(t,2),r=a[0],c=a[1],l=Object(C.f)();return{data:r,handleSearchChange:Object(n.useCallback)((function(t,a){var n=a.value;c({loading:!0,value:n,results:[]});var r=e.filter((function(e){return e.title.toLowerCase().indexOf(n)>-1}));c({loading:!1,value:n,results:r})}),[e]),handleResultSelect:Object(n.useCallback)((function(e,t){var a=t.result;c({loading:!1,value:"",results:[]}),l.push("/watch/".concat(a.id))}),[l])}},R=k.baseRoute,U=Object(C.h)((function(e){var t=e.location.pathname,a=Object(n.useContext)(g),c=W(a.data),l=c.data,i=c.handleSearchChange,u=c.handleResultSelect;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{fixed:"top",inverted:!0},r.a.createElement(I.a.Item,{header:!0},"uCinema"),r.a.createElement(I.a.Item,{as:y.b,name:"home",active:t==="".concat(R,"/"),href:"".concat(R,"/"),to:"".concat(R,"/")}),r.a.createElement(I.a.Item,{as:y.b,name:"movies",active:t==="".concat(R,"/movies"),href:"".concat(R,"/movies"),to:"".concat(R,"/movies")}),r.a.createElement(I.a.Item,{as:y.b,name:"tv-series",active:t==="".concat(R,"/tv-series"),href:"".concat(R,"/tv-series"),to:"".concat(R,"/tv-series")}),a.intranet&&r.a.createElement(I.a.Item,{as:y.b,name:"intra-movies",active:t==="".concat(R,"/intra-movies"),href:"".concat(R,"/intra-movies"),to:"".concat(R,"/intra-movies")}),r.a.createElement(I.a.Menu,{position:"right"},r.a.createElement(I.a.Item,null,r.a.createElement(S.a,{as:x.a,loading:l.loading,results:l.results,value:l.value,onSearchChange:i,onResultSelect:u,minWidth:550})))),r.a.createElement(S.a,{as:D.a,maxWidth:550,style:{padding:"60px 0 20px"}},r.a.createElement(x.a,{loading:l.loading,results:l.results,value:l.value,onSearchChange:i,onResultSelect:u,minWidth:550,input:{style:{width:"100%"}}})),r.a.createElement(S.a,{as:"div",minWidth:550,style:{paddingBottom:84}}))})),G=a(27),B=a(351),F=a(176),P=(a(338),k.baseRoute),T=function(e){var t=e.id,a=e.title,n=e.imgUrl,c=(e.createdDate,n||"https://i.imgur.com/0FX7ZPe.jpg"),l=e.intra?"".concat(P,"/intra/watch/").concat(t):"".concat(P,"/watch/").concat(t);return r.a.createElement(B.a,{as:y.b,href:l,to:l,className:"video-card"},r.a.createElement(F.a,{className:"fixed-height",size:"medium",src:c,wrapped:!0,ui:!1}),r.a.createElement(B.a.Content,{className:"content-over-image"},r.a.createElement(B.a.Description,{className:"color-white"},a)))},L=function(e){var t=e.list,a=e.intra;return r.a.createElement(B.a.Group,null,t.map((function(e){return r.a.createElement(T,{intra:a,key:e.id,id:e.id,title:e.title,imgUrl:e.imgUrl,createdDate:e.createdDate})})))},Y=function(){var e=Object(n.useContext)(g);return r.a.createElement(D.a,null,r.a.createElement(G.a,null,r.a.createElement("title",null,"uCinema"),r.a.createElement("meta",{name:"description",content:"Watch movies on uCinema"})),r.a.createElement(L,{list:e.data}))},M=function(){var e=Object(n.useContext)(g).data.filter((function(e){return"movie"===e.category}));return r.a.createElement(D.a,null,r.a.createElement(G.a,null,r.a.createElement("title",null,"Movies | uCinema"),r.a.createElement("meta",{name:"description",content:"Watch movies on uCinema"})),r.a.createElement(L,{list:e}))},N=function(){var e=Object(n.useContext)(g).data.filter((function(e){return"series"===e.category}));return r.a.createElement(D.a,null,r.a.createElement(G.a,null,r.a.createElement("title",null,"Tv Series | uCinema"),r.a.createElement("meta",{name:"description",content:"Watch tv series on uCinema"})),r.a.createElement(L,{list:e}))},Q=function(){var e=Object(n.useContext)(g);return console.log(e),r.a.createElement(D.a,null,r.a.createElement(G.a,null,r.a.createElement("title",null,"IntraMovies | uCinema"),r.a.createElement("meta",{name:"description",content:"Watch movies on uCinema"})),r.a.createElement(L,{intra:!0,list:e.cloudData}))},z=a(85),J=a(353),X=a(354),Z=a(347),q=a(350),A=k.baseRoute,H=function(e){var t=e.eps,a=e.epId;return r.a.createElement(z.a.Group,{style:{paddingTop:"20px"}},t.map((function(e){return r.a.createElement(z.a,{as:y.b,key:e.title,content:e.title,icon:"mail",active:a===e.id,href:"".concat(A,"/watch/").concat(e.parentId,"/").concat(e.id),to:"".concat(A,"/watch/").concat(e.parentId,"/").concat(e.id)})})))},V=function(){var e=Object(n.useContext)(g),t=Object(C.g)(),a=t.name,c=t.subname,l=e.data.filter((function(e){return a===e.id}))[0],i=Object(n.useState)(null),u=Object(o.a)(i,2),m=u[0],d=u[1];Object(n.useEffect)((function(){l&&l.imdbID&&fetch("http://www.omdbapi.com/?i=".concat(l.imdbID,"&apikey=c11086ed&plot=full")).then((function(e){return e.json()})).then((function(e){return d(e)}))}),[l]);var p=l&&l.widerImgUrl?{placeholder:l.widerImgUrl}:{},h=[];l&&(h=e.subData[l.id]||[]);var E=c;if(E||h.length>0&&(E=h[0].id),h.length>0){var b=h.filter((function(e){return E===e.id}))[0]||{},f=b.title,v=b.url,j=b.type;l=Object(s.a)(Object(s.a)({},l),{},{title:f,url:v,type:j})}return r.a.createElement(D.a,null,l&&r.a.createElement(G.a,null,r.a.createElement("title",null,"Watch ",l.title," | uCinema"),r.a.createElement("meta",{name:"description",content:"Watch ".concat(l.title)})),e.isLoading&&r.a.createElement(J.a,{loading:!0},r.a.createElement(F.a,{src:"https://react.semantic-ui.com/images/wireframe/paragraph.png"})),l&&r.a.createElement(X.a,{as:"h2"},l.title,r.a.createElement(X.a.Subheader,null,l.desc)),l&&("youtube"===l.type?r.a.createElement(Z.a,Object.assign({id:l.url,source:"youtube",iframe:{allowFullScreen:!0}},p)):r.a.createElement(Z.a,Object.assign({url:l.url,iframe:{allowFullScreen:!0}},p))),r.a.createElement(H,{eps:h,epId:E}),m&&r.a.createElement(q.a.Group,{items:[{image:m.Poster,header:m.Title,description:m.Plot,meta:r.a.createElement("div",null,r.a.createElement("b",null,"Year:")," ",m.Year," ",r.a.createElement("br",null),r.a.createElement("b",null,"Released:")," ",m.Released," ",r.a.createElement("br",null),r.a.createElement("b",null,"Genre:")," ",m.Genre," ",r.a.createElement("br",null),r.a.createElement("b",null,"Director:")," ",m.Director," ",r.a.createElement("br",null),r.a.createElement("b",null,"Writer:")," ",m.Writer),extra:""}]}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))},$=k.baseRoute,_=function(e){var t=e.eps,a=e.epId;return r.a.createElement(z.a.Group,{style:{paddingTop:"20px"}},t.map((function(e){return r.a.createElement(z.a,{as:y.b,key:e.title,content:e.title,icon:"mail",active:a===e.id,href:"".concat($,"/intra/watch/").concat(e.parentId,"/").concat(e.id),to:"".concat($,"/intra/watch/").concat(e.parentId,"/").concat(e.id)})})))},K=function(){var e=Object(n.useContext)(g),t=Object(C.g)(),a=t.name,c=t.subname,l=e.cloudData.filter((function(e){return a===e.id}))[0],i=Object(n.useState)(null),u=Object(o.a)(i,2),d=u[0],p=u[1];Object(n.useEffect)((function(){l&&l.imdbID&&fetch("http://www.omdbapi.com/?i=".concat(l.imdbID,"&apikey=c11086ed&plot=full")).then((function(e){return e.json()})).then((function(e){return p(e)}))}),[l]);var h=l&&l.widerImgUrl?{placeholder:l.widerImgUrl}:{},E=[];l&&(E=e.cloudSubData[l.id]||[]);var b=c;if(b||E.length>0&&(b=E[0].id),E.length>0){var f=E.filter((function(e){return b===e.id}))[0]||{},v=f.title,j=f.url,O=f.type;l=Object(s.a)(Object(s.a)({},l),{},{title:v,url:j,type:O})}return r.a.createElement(D.a,null,l&&r.a.createElement(G.a,null,r.a.createElement("title",null,"Watch ",l.title," | uCinema"),r.a.createElement("meta",{name:"description",content:"Watch ".concat(l.title)})),e.isLoading&&r.a.createElement(J.a,{loading:!0},r.a.createElement(F.a,{src:"https://react.semantic-ui.com/images/wireframe/paragraph.png"})),l&&r.a.createElement(X.a,{as:"h2"},l.title,r.a.createElement(X.a.Subheader,null,l.desc)),l&&("youtube"===l.type?r.a.createElement(Z.a,Object.assign({id:l.url,source:"youtube",iframe:{allowFullScreen:!0}},h)):r.a.createElement(Z.a,Object.assign({url:"".concat(m.intraBaseUrl).concat(l.url),iframe:{allowFullScreen:!0}},h))),r.a.createElement(_,{eps:E,epId:b}),d&&r.a.createElement(q.a.Group,{items:[{image:d.Poster,header:d.Title,description:d.Plot,meta:r.a.createElement("div",null,r.a.createElement("b",null,"Year:")," ",d.Year," ",r.a.createElement("br",null),r.a.createElement("b",null,"Released:")," ",d.Released," ",r.a.createElement("br",null),r.a.createElement("b",null,"Genre:")," ",d.Genre," ",r.a.createElement("br",null),r.a.createElement("b",null,"Director:")," ",d.Director," ",r.a.createElement("br",null),r.a.createElement("b",null,"Writer:")," ",d.Writer),extra:""}]}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))},ee=function(){var e=Object(C.f)();return Object(n.useEffect)((function(){return e.listen((function(e){i.a.set({page:e.pathname}),i.a.pageview(e.pathname)}))}),[e]),r.a.createElement("div",null)},te=k.baseRoute;var ae=function(){return r.a.createElement(y.a,null,r.a.createElement("div",null,r.a.createElement(ee,null),r.a.createElement(U,null),r.a.createElement(C.c,null,r.a.createElement(C.a,{exact:!0,path:"".concat(te,"/")},r.a.createElement(Y,null)),r.a.createElement(C.a,{path:"".concat(te,"/movies")},r.a.createElement(M,null)),r.a.createElement(C.a,{path:"".concat(te,"/tv-series")},r.a.createElement(N,null)),r.a.createElement(C.a,{path:"".concat(te,"/watch/:name/:subname?")},r.a.createElement(V,null)),r.a.createElement(C.a,{path:"".concat(te,"/intra-movies")},r.a.createElement(Q,null)),r.a.createElement(C.a,{path:"".concat(te,"/intra/watch/:name/:subname?")},r.a.createElement(K,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null,r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),i.a.initialize("UA-17018575-1")}},[[185,1,2]]]);
//# sourceMappingURL=main.c4bef40a.chunk.js.map